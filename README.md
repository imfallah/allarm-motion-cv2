# á—©á’ªá—©á–‡á—° á—°OTIOá‘  ğŸŒŸ

<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"><br><br>

<p align="center">
<img src="https://github.com/jokernets/motion_cv2/blob/main/Alarm%20motion(1).gif" width=600px>
</p>

<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"><br><br>

<p align="center">
  
[![Gitter](https://badges.gitter.im/PanXProject/awesome-certificates.svg)](https://matrix.to/#/#my-gitter:gitter.im?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge)
</p>

<p align="center">
  <img src="https://img.shields.io/github/last-commit/imfallah/allarm-motion-cv2">
  <img src="https://img.shields.io/github/contributors/imfallah/allarm-motion-cv2">
  <img src="https://img.shields.io/github/issues/imfallah/allarm-motion-cv2">
  <img src="https://img.shields.io/github/stars/imfallah/allarm-motion-cv2">

</p>
<p align="center">
<a href="https://github.com/rahuldkjain/github-profile-readme-generator/blob/master/LICENSE" target="blank">
<img src="https://img.shields.io/github/license/imfallah/snakegame?style=flat-square" alt="github-profile-readme-generator license" />
</a>
<a href="https://github.com/rahuldkjain/github-profile-readme-generator/fork" target="blank">
<img src="https://img.shields.io/github/forks/imfallah/snakegame?style=flat-square" alt="github-profile-readme-generator forks"/>
</a>
<a href="https://github.com/rahuldkjain/github-profile-readme-generator/stargazers" target="blank">
<img src="https://img.shields.io/github/stars/imfallah/snakegame?style=flat-square" alt="github-profile-readme-generator stars"/>
</a>
<a href="https://github.com/rahuldkjain/github-profile-readme-generator/issues" target="blank">
<img src="https://img.shields.io/github/issues/imfallah/allarm-motion-cv2?style=flat-square" alt="github-profile-readme-generator issues"/>
</a>
<a href="https://github.com/rahuldkjain/github-profile-readme-generator/pulls" target="blank">
<img src="https://img.shields.io/github/issues-pr/imfallah/allarm-motion-cv2?style=flat-square" alt="github-profile-readme-generator pull-requests"/>
</a>

</p>

## `Translation ğŸ”—`

  
- [ÙØ§Ø±Ø³ÛŒ](https://github.com/imfallah/allarm-motion-cv2/blob/main/Translatin/FA.md)






Table of contents âœ…âœ”
=================

<!--ts-->
   * [Installation](#installation)
   * [Anilayes CodeğŸ“ˆ](#analiys-code-)
     * [PART 1âœ”](#part-1)
     * [PART 2âœ”](#part-2)
     * [PART 3âœ”](#part-3)
     * [PART 4âœ”](#part-4)
   * [Mor ExampleğŸ’¯](#more-examples-and-showcase-)
     * [Picture ProjectğŸ”†](#picture-project)
     * [Video ProjectğŸ“º](#video-image-of-the-app-)
    
   * [`CONNECT MEğŸŒğŸ‘»`](#connect-me)
<!--te-->


# ğ’œğ“ğ’¶ğ“‡ğ“‚ ğ“‚â„´ğ“‰ğ’¾â„´ğ“ƒ 

ğŒğ¨ğ­ğ¢ğ¨ğ§ ğšğ¥ğšğ«ğ¦ ğ©ğ«ğ¨ğ£ğğœğ­ ğ®ğ¬ğ¢ğ§ğ  ğğ©ğğ§ğ‚ğ• ğ¥ğ¢ğ›ğ«ğšğ«ğ² ğ¢ğ¬ ğšğ§ ğšğ­ğ­ğ«ğšğœğ­ğ¢ğ¯ğ ğšğ§ğ ğ©ğ«ğšğœğ­ğ¢ğœğšğ¥ ğ©ğ«ğ¨ğ£ğğœğ­ ğ­ğ¡ğšğ­ ğšğ¥ğ¥ğ¨ğ°ğ¬ ğ¦ğ¨ğ­ğ¢ğ¨ğ§ ğğğ­ğğœğ­ğ¢ğ¨ğ§. ğ“ğ¡ğ¢ğ¬ ğ©ğ«ğ¨ğ£ğğœğ­ ğšğ¥ğ¥ğ¨ğ°ğ¬ ğ²ğ¨ğ® ğ­ğ¨ ğ­ğ«ğ¢ğ ğ ğğ« ğ§ğ¨ğ­ğ¢ğŸğ¢ğœğšğ­ğ¢ğ¨ğ§ğ¬ ğ¨ğ« ğšğœğ­ğ¢ğ¨ğ§ğ¬ ğ›ğ² ğğğ­ğğœğ­ğ¢ğ§ğ  ğ¦ğ¨ğ­ğ¢ğ¨ğ§ ğ¢ğ§ ğ¢ğ¦ğšğ ğğ¬ ğ¨ğ« ğ¯ğ¢ğğğ¨ğ¬. ğ€ğ¦ğ¨ğ§ğ  ğ¢ğ­ğ¬ ğšğ©ğ©ğ¥ğ¢ğœğšğ­ğ¢ğ¨ğ§ğ¬, ğ°ğ ğœğšğ§ ğ¦ğğ§ğ­ğ¢ğ¨ğ§ ğğ¨ğ¨ğ« ğ¦ğ¨ğ§ğ¢ğ­ğ¨ğ«ğ¢ğ§ğ , ğŸğ¢ğ«ğ ğšğ¥ğšğ«ğ¦ ğ¨ğ« ğ§ğ¨ğ­ğ¢ğŸğ¢ğœğšğ­ğ¢ğ¨ğ§ ğ¢ğ§ ğğ¦ğğ«ğ ğğ§ğœğ² ğœğšğ¬ğğ¬. ğ“ğ¡ğ¢ğ¬ ğ©ğ«ğ¨ğ£ğğœğ­ ğœğšğ§ ğ¡ğğ¥ğ© ğ²ğ¨ğ® ğ¢ğ¦ğ©ğ«ğ¨ğ¯ğ ğ­ğ¡ğ ğ¬ğğœğ®ğ«ğ¢ğ­ğ² ğšğ§ğ ğğŸğŸğ¢ğœğ¢ğğ§ğœğ² ğ¨ğŸ ğ²ğ¨ğ®ğ« ğ¬ğ²ğ¬ğ­ğğ¦ğ¬.

### `ğ—œ ğ˜€ğ˜‚ğ—´ğ—´ğ—²ğ˜€ğ˜ ğ˜†ğ—¼ğ˜‚ ğ˜€ğ˜ğ—®ğ˜† ğ˜„ğ—¶ğ˜ğ—µ ğ—ºğ—² ğ˜‚ğ—»ğ˜ğ—¶ğ—¹ ğ˜ğ—µğ—² ğ—²ğ—»ğ—± ğ˜„ğ—µğ—²ğ—» ğ˜„ğ—² ğ—®ğ—¿ğ—² ğ—´ğ—¼ğ—¶ğ—»ğ—´ ğ˜ğ—¼ ğ—°ğ—µğ—²ğ—°ğ—¸ ğ˜ğ—µğ—² ğ—°ğ—¼ğ—±ğ—²ğ˜€`!
#### `ğ”»ğ• ğ•Ÿ'ğ•¥ ğ•—ğ• ğ•£ğ•˜ğ•–ğ•¥ ğ•¥ğ•™ğ•– ğ•¤ğ•¥ğ•’ğ•£`ğŸ˜‰ğŸŒŸ




# Installation

## Install the Library with pip:

```python
pip install opencv-python


```

Update existing installation:`pip3 install (YOUR LIBRARY) --upgrade`
(update as often as possible because this library is under active development)




## `PART 1`:
- `import threading` - Imports the threading module, which allows you to run multiple threads simultaneously.-
-  `import winsound` - Imports the winsound module, which allows you to play sound on Windows systems.
- `import cv2` - Imports the OpenCV library, which is used for computer vision tasks.
- `import imutils` - Imports the imutils library, which provides convenience functions to work with OpenCV.
- `cap = cv2.VideoCapture(0, cv2.CAP_DSHOW)` - Opens a video capture device (webcam) with device index 0 using the DirectShow API on Windows.
- `cap.set(cv2.CAP_PROP_FRAME_WIDTH, 640)` - Sets the width of the captured video frames to 640 pixels.
- `cap.set(cv2.CAP_PROP_FRAME_HEIGHT, 480)` - Sets the height of the captured video frames to 480 pixels.
- `_, start_frame = cap.read()` - Reads a frame from the video capture device and assigns it to the variable `start_frame`.
- `start_frame = imutils.resize(start_frame, width=500)` - Resizes the `start_frame` image to a width of 500 pixels using the imutils library.
- `start_frame = cv2.cvtColor(start_frame, cv2.COLOR_BGR2GRAY)` - Converts the color image `start_frame` to grayscale.
- `strat_frame = cv2.GaussianBlur(start_frame, (21, 21), 0)` - Applies a Gaussian blur filter with a kernel size of (21, -
-  to the grayscale `start_frame` image.

```python
import threading
import  winsound
import cv2
import imutils

cap = cv2.VideoCapture(0,cv2.CAP_DSHOW)
cap.set(cv2.CAP_PROP_FRAME_WIDTH,640)
cap.set(cv2.CAP_PROP_FRAME_HEIGHT,480)

_,start_frame = cap.read()
start_frame = imutils.resize(start_frame,width=500)
start_frame = cv2.cvtColor(start_frame,cv2.COLOR_BGR2GRAY)
strat_frame = cv2.GaussianBlur(start_frame,(21,21),0)
```
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"><br><br>
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"><br><br>

# Adding Define in project

## `PART 2`:

- `alarm = False`: Initializes the `alarm` variable as `False`.
- `alarm_mode = False`: Initializes the `alarm_mode` variable as `False`.
- `alarm_counter = 0`: Initializes the `alarm_counter` variable as `0`.
- `def beep_alarm():`: Defines a function named `beep_alarm`.
- `global alarm`: Declares that the `alarm` variable inside the function refers to the global variable with the same name.
- `for _ in range(5):`: Initiates a loop that runs 5 times using an underscore `_` as a loop variable (since it's not used inside the loop).
- `if not alarm_mode: break`: Checks if `alarm_mode` is `False`, breaks out of the loop if true.
- `winsound.Beep(2500,100)`: Calls the `Beep` function from the `winsound` module with frequency `2500` and duration `100` to produce a beeping sound.
- `alarm = False`: Sets the `alarm` variable to `False`.
```python

alarm = False 
alarm_mode = False
alarm_counter = 0 

def beep_alarm():
    global alarm 
    for _ in range(5):
        if not alarm_mode:
            break 
        #print("ALARM")
        winsound.Beep(2500,100)
    alarm = False 
```
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"><br><br>
<img src="https://user-images.githubusercontent.com/73097560/115834477-dbab4500-a447-11eb-908a-139a6edaec5c.gif"><br><br>

## `PART 3`:
- The `while True:` loop runs continuously and captures frames from a camera (`cap.read()`).

- The captured frame is resized to a width of 500 pixels using `imutils.resize()`.

-  If `alarm_mode` is activated:
    a. The frame is converted to grayscale (`cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)`).
    b. Gaussian blur is applied to the grayscale frame.
    c. The difference between the current frame and the `start_frame` is calculated.
    d. A threshold is applied to the difference to highlight changes.
    e. If the sum of the threshold values exceeds a certain threshold (`1000` in this case), an alarm is triggered.

- If the alarm counter surpasses a threshold (`20`), and the alarm is not already activated, a new thread is created to start the alarm.

- The program listens for key inputs. Pressing 't' toggles the alarm mode, and pressing 'q' exits the program.

- The `beep_alarm()` function (not shown in the provided code) is likely responsible for generating the alarm sound.

```python

while True:
    _,frame = cap.read()
    frame = imutils.resize(frame,width=500)

    if alarm_mode : 
        frame_bw = cv2.cvtColor(frame,cv2.COLOR_BGR2GRAY)
        frame_bw = cv2.GaussianBlur(frame_bw,(5,5),0)
        diffrence = cv2.absdiff(frame_bw,start_frame)
        threshold = cv2.threshold(diffrence,25,255,cv2.THRESH_BINARY)[1]
        start_frame = frame_bw 
        
        if threshold.sum()> 1000 :
            print(threshold.sum())
            alarm_counter += 1 
            
        else : 
            if alarm_counter > 0 : 
                alarm_counter -= 1 
        cv2.imshow("Cam",threshold)
    else: 
        cv2.imshow("Cam",frame)
            
    if alarm_counter > 20 :
        if not alarm : 
            alarm = True 
            threading.Thread(target=beep_alarm).start()  
    key_pressed = cv2.waitKey(30)
    if key_pressed == ord("t"):
        alarm_mode = not alarm_mode 
        alarm_counter = 0
    if key_pressed == ord("q"):
        alarm_mode = False 
        break    
```

## `PART 4`:
Here's a breakdown of the code line by line:
- `cap.release()`: This line releases the video capture object `cap`, which is used for capturing video from a camera or video file. Releasing the capture object is important for freeing up system resources.-
- `cv2.destroyAllWindows()`: This line closes all OpenCV windows that are currently open. This is useful for cleaning up any windows that may have been opened during image or video processing.

```python
cap.release()
cv2.destroyAllWindows()
```

## Picture ProjectğŸ‘€

<img src="https://github.com/imfallah/allarm-motion-cv2/blob/main/public/cap1.png" width="300" height="300">
<img src="https://github.com/imfallah/allarm-motion-cv2/blob/main/public/gif.gif"><br><br>





## More Examples and Showcase ğŸ„ğŸ‘‘

### Video image of the APP ğŸ“º



<img src="https://github.com/imfallah/allarm-motion-cv2/raw/main/public/via.mp4">

# `CONNECT ME`ğŸŒğŸ‘»

<a herf="https://www.buymeacoffee.com/jokernets"><img src="https://cdn.buymeacoffee.com/buttons/v2/arial-yellow.png" alt="Buy Me A Coffee" width="180px">
<a href="mailto:joker.until33@gmail.com"><img align="center" width="60px" src="https://github.com/edent/SuperTinyIcons/raw/master/images/svg/gmail.svg" style="max-width: 100%;"></a><a href="https://www.linkedin.com/" target="blank"><img align="center" src="https://raw.githubusercontent.com/rahuldkjain/github-profile-readme-generator/master/src/images/icons/Social/linked-in-alt.svg" alt="https://www.linkedin.com/in/imfallah/" height="40" width="60" /></a>

